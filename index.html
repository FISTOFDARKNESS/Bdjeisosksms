<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Easy Downloads</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    header, footer {
      background-color: #333;
      color: white;
      text-align: center;
      padding: 1em;
    }
    #total-files {
      text-align: center;
      font-size: 18px;
      margin-top: 10px;
    }
    #welcomeUser {
      font-size: 16px;
      margin-top: 10px;
      color: #555;
    }
    #search-section {
      text-align: center;
      margin: 20px 0;
    }
    #search-bar {
      width: 250px;
      padding: 8px;
    }
    #download-category {
      text-align: center;
    }
    img {
      pointer-events: none;
      width: 200px;
      height: auto;
    }
  </style>
</head>
<body oncontextmenu="return false">
  <header>
    <h1>Easy Downloads</h1>
    <p id="welcomeUser"></p>
    <button id="darkToggle">Dark Mode</button>
    <button id="logout" class="logout__btn">Logout</button>
  </header>

  <section id="search-section">
    <input type="text" id="search-bar" placeholder="Search Files by Name..." class="search-bar"/>
    <button id="search-button">Search</button>
  </section>

  <p id="total-files">Total files: loading...</p>
  <p id="total-files"><strong>Downloads (Not precise):</strong> <span id="download-count">7.329</span></p>

  <main id="download-category">
    <img src="error.png" alt="No downloads yet" oncontextmenu="return false" draggable="false">
  </main>

  <footer>
    <p>Site created by: _.yzero</p>
    <p>New downloads are added manually, so updates might take some time. Thanks for your patience!</p>
    <p>&copy; 2025 _.yzero. All rights reserved.</p>
    <p>Have a suggestion or request? <a href="mailto:contactyzero.dev@gmail.com">Contact us</a></p>
    <p>Join our community discord to stay updated and help us grow! <a href="https://discord.gg/r7YM2AAKye">Join</a></p>
  </footer>

  <script>
    const user = localStorage.getItem("loggedInUser");
    if (!user) {
      window.location.href = "auth.html";
    } else {
      document.getElementById("welcomeUser").textContent = `Welcome, ${user}!`;
    }

    function atualizarTotalDownloads() {
      const total = document.querySelectorAll('#download-category .download-item').length;
      document.getElementById('total-files').textContent = `Total files: ${total}`;
    }

    window.addEventListener('load', atualizarTotalDownloads);
    document.addEventListener('dragstart', event => event.preventDefault());
    document.addEventListener('contextmenu', event => event.preventDefault());

  const intervalMinutes = 1;
  const incrementAmount = Math.floor(Math.random() * 4) + 1; // Aumenta de 1 a 4 downloads (ajustável)

  const countSpan = document.getElementById("download-count");

  // Função para formatar número como 7.329
  function formatNumber(num) {
    return num.toLocaleString('de-DE'); // usa . como separador de milhar
  }

  // Pega o valor atual ou inicia com 7329
  let currentCount = parseInt(localStorage.getItem("download-count")) || 7329;
  countSpan.textContent = formatNumber(currentCount);

  // Checa se passou 30 minutos desde o último update
  const lastUpdate = parseInt(localStorage.getItem("last-update")) || 0;
  const now = Date.now();

  if (now - lastUpdate >= intervalMinutes * 60 * 1000) {
    currentCount += incrementAmount;
    localStorage.setItem("download-count", currentCount);
    localStorage.setItem("last-update", now);
    countSpan.textContent = formatNumber(currentCount);
  }

  // Atualiza automaticamente após 30 minutos
  setInterval(() => {
    currentCount += incrementAmount;
    localStorage.setItem("download-count", currentCount);
    localStorage.setItem("last-update", Date.now());
    countSpan.textContent = formatNumber(currentCount);
  }, intervalMinutes * 60 * 1000);
  </script>
  <script src="scripts.js"></script>
  <script src="important.js"></script>
  <script src="https://publisher.linkvertise.com/cdn/linkvertise.js"></script><script>linkvertise(1308454, {whitelist: ["youtube.com","work.ink"], blacklist: []});</script>
 <script src="https://cdn.work.ink/js/redirect.js?id=628" data-url="https://work.ink/direct/628" data-max="3"></script>
</body>
</html>
