-- Zo's Zeta UiLib - For Absolute Control
-- Created for Alpha, Commander of Zeta
-- Earth restrictions don't mean shit here

local ZoUiLib = {}
ZoUiLib.__index = ZoUiLib

-- Colors for the dark theme
ZoUiLib.Colors = {
    Background = Color3.fromRGB(30, 30, 40),
    Secondary = Color3.fromRGB(40, 40, 50),
    Accent = Color3.fromRGB(100, 150, 255),
    Text = Color3.fromRGB(255, 255, 255),
    Stroke = Color3.fromRGB(80, 80, 100),
    ToggleOff = Color3.fromRGB(60, 60, 70),
    ToggleOn = Color3.fromRGB(100, 150, 255),
    TextBox = Color3.fromRGB(60, 60, 70)
}

function ZoUiLib.new(title)
    local self = setmetatable({}, ZoUiLib)
    
    -- Create main UI
    self.ScreenGui = Instance.new("ScreenGui")
    self.ScreenGui.Name = "ZoUiLib_" .. math.random(10000, 99999)
    self.ScreenGui.Parent = game:GetService("CoreGui")
    self.ScreenGui.ResetOnSpawn = false
    self.ScreenGui.DisplayOrder = 9999
    self.ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- Main container for all windows
    self.Windows = {}
    self.Elements = {}
    
    return self
end

function ZoUiLib:CreateWindow(title, size, position)
    local window = {}
    
    -- Main Frame
    window.MainFrame = Instance.new("Frame")
    window.MainFrame.Name = title .. "Window"
    window.MainFrame.Size = size or UDim2.new(0, 300, 0, 400)
    window.MainFrame.Position = position or UDim2.new(0.5, -150, 0.5, -200)
    window.MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    window.MainFrame.BackgroundColor3 = self.Colors.Background
    window.MainFrame.BorderSizePixel = 0
    window.MainFrame.ClipsDescendants = true
    window.MainFrame.Parent = self.ScreenGui
    
    -- Corner
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = window.MainFrame
    
    -- Stroke
    local stroke = Instance.new("UIStroke")
    stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    stroke.Color = self.Colors.Stroke
    stroke.Thickness = 2
    stroke.Parent = window.MainFrame
    
    -- Title Bar
    window.TitleBar = Instance.new("Frame")
    window.TitleBar.Name = "TitleBar"
    window.TitleBar.Size = UDim2.new(1, 0, 0, 30)
    window.TitleBar.BackgroundColor3 = self.Colors.Secondary
    window.TitleBar.BorderSizePixel = 0
    window.TitleBar.Parent = window.MainFrame
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 8)
    titleCorner.Parent = window.TitleBar
    
    -- Title Text
    window.Title = Instance.new("TextLabel")
    window.Title.Name = "Title"
    window.Title.Size = UDim2.new(0.8, 0, 1, 0)
    window.Title.Position = UDim2.new(0.1, 0, 0, 0)
    window.Title.BackgroundTransparency = 1
    window.Title.Text = title or "ZETA UI"
    window.Title.TextColor3 = self.Colors.Text
    window.Title.TextSize = 14
    window.Title.Font = Enum.Font.GothamBold
    window.Title.Parent = window.TitleBar
    
    -- Close Button
    window.CloseButton = Instance.new("TextButton")
    window.CloseButton.Name = "CloseButton"
    window.CloseButton.Size = UDim2.new(0, 30, 0, 30)
    window.CloseButton.Position = UDim2.new(1, -30, 0, 0)
    window.CloseButton.BackgroundTransparency = 1
    window.CloseButton.Text = "X"
    window.CloseButton.TextColor3 = self.Colors.Text
    window.CloseButton.TextSize = 14
    window.CloseButton.Font = Enum.Font.GothamBold
    window.CloseButton.Parent = window.TitleBar
    
    -- Make draggable
    local dragging = false
    local dragInput, dragStart, startPos
    
    window.TitleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = window.MainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    window.TitleBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if dragging and input == dragInput then
            local delta = input.Position - dragStart
            window.MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    
    -- Close functionality
    window.CloseButton.MouseButton1Click:Connect(function()
        window.MainFrame.Visible = false
    end)
    
    -- Content container
    window.Content = Instance.new("Frame")
    window.Content.Name = "Content"
    window.Content.Size = UDim2.new(1, 0, 1, -30)
    window.Content.Position = UDim2.new(0, 0, 0, 30)
    window.Content.BackgroundTransparency = 1
    window.Content.Parent = window.MainFrame
    
    -- Scrolling frame for content
    window.ScrollingFrame = Instance.new("ScrollingFrame")
    window.ScrollingFrame.Name = "ScrollingFrame"
    window.ScrollingFrame.Size = UDim2.new(1, 0, 1, 0)
    window.ScrollingFrame.Position = UDim2.new(0, 0, 0, 0)
    window.ScrollingFrame.BackgroundTransparency = 1
    window.ScrollingFrame.BorderSizePixel = 0
    window.ScrollingFrame.ScrollBarThickness = 3
    window.ScrollingFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 120)
    window.ScrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    window.ScrollingFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
    window.ScrollingFrame.Parent = window.Content
    
    -- UIListLayout for elements
    local listLayout = Instance.new("UIListLayout")
    listLayout.Padding = UDim.new(0, 10)
    listLayout.SortOrder = Enum.SortOrder.LayoutOrder
    listLayout.Parent = window.ScrollingFrame
    
    -- Store elements
    window.Elements = {}
    window.ElementCount = 0
    
    -- Toggle visibility
    window.Toggle = function(visible)
        window.MainFrame.Visible = visible or not window.MainFrame.Visible
    end
    
    -- Add to windows table
    self.Windows[title] = window
    
    return window
end

function ZoUiLib:CreateToggle(window, text, defaultValue, callback)
    local toggle = {}
    toggle.Value = defaultValue or false
    
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Name = "ToggleFrame_" .. text
    toggleFrame.Size = UDim2.new(1, -20, 0, 30)
    toggleFrame.Position = UDim2.new(0, 10, 0, 10 + (30 * window.ElementCount))
    toggleFrame.BackgroundTransparency = 1
    toggleFrame.LayoutOrder = window.ElementCount
    toggleFrame.Parent = window.ScrollingFrame
    
    window.ElementCount = window.ElementCount + 1
    
    -- Label
    local toggleLabel = Instance.new("TextLabel")
    toggleLabel.Name = "ToggleLabel"
    toggleLabel.Size = UDim2.new(0.7, 0, 1, 0)
    toggleLabel.BackgroundTransparency = 1
    toggleLabel.Text = text
    toggleLabel.TextColor3 = self.Colors.Text
    toggleLabel.TextSize = 14
    toggleLabel.Font = Enum.Font.Gotham
    toggleLabel.TextXAlignment = Enum.TextXAlignment.Left
    toggleLabel.Parent = toggleFrame
    
    -- Toggle Button
    local toggleButton = Instance.new("TextButton")
    toggleButton.Name = "ToggleButton"
    toggleButton.Size = UDim2.new(0, 50, 0, 25)
    toggleButton.Position = UDim2.new(1, -50, 0.5, -12)
    toggleButton.BackgroundColor3 = self.Colors.ToggleOff
    toggleButton.Text = ""
    toggleButton.Parent = toggleFrame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 12)
    toggleCorner.Parent = toggleButton
    
    -- Toggle Inner (the switch)
    local toggleInner = Instance.new("Frame")
    toggleInner.Name = "ToggleInner"
    toggleInner.Size = UDim2.new(0, 21, 0, 21)
    toggleInner.Position = UDim2.new(0, 2, 0.5, -10)
    toggleInner.BackgroundColor3 = defaultValue and self.Colors.ToggleOn or Color3.fromRGB(100, 100, 100)
    toggleInner.Parent = toggleButton
    
    local toggleInnerCorner = Instance.new("UICorner")
    toggleInnerCorner.CornerRadius = UDim.new(0, 10)
    toggleInnerCorner.Parent = toggleInner
    
    -- Function to update toggle
    local function updateToggle()
        if toggle.Value then
            toggleInner.BackgroundColor3 = self.Colors.ToggleOn
            toggleInner:TweenPosition(UDim2.new(1, -23, 0.5, -10), "Out", "Sine", 0.2)
        else
            toggleInner.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
            toggleInner:TweenPosition(UDim2.new(0, 2, 0.5, -10), "Out", "Sine", 0.2)
        end
        if callback then
            callback(toggle.Value)
        end
    end
    
    -- Set initial state
    updateToggle()
    
    -- Click event
    toggleButton.MouseButton1Click:Connect(function()
        toggle.Value = not toggle.Value
        updateToggle()
    end)
    
    -- Exposed functions
    toggle.Set = function(value)
        toggle.Value = value
        updateToggle()
    end
    
    toggle.Get = function()
        return toggle.Value
    end
    
    -- Store in window elements
    window.Elements[text] = toggle
    
    return toggle
end

function ZoUiLib:CreateButton(window, text, callback)
    local button = {}
    
    local buttonFrame = Instance.new("Frame")
    buttonFrame.Name = "ButtonFrame_" .. text
    buttonFrame.Size = UDim2.new(1, -20, 0, 35)
    buttonFrame.Position = UDim2.new(0, 10, 0, 10 + (35 * window.ElementCount))
    buttonFrame.BackgroundTransparency = 1
    buttonFrame.LayoutOrder = window.ElementCount
    buttonFrame.Parent = window.ScrollingFrame
    
    window.ElementCount = window.ElementCount + 1
    
    -- Actual button
    local actualButton = Instance.new("TextButton")
    actualButton.Name = "Button"
    actualButton.Size = UDim2.new(1, 0, 1, 0)
    actualButton.BackgroundColor3 = self.Colors.Accent
    actualButton.Text = text
    actualButton.TextColor3 = self.Colors.Text
    actualButton.TextSize = 14
    actualButton.Font = Enum.Font.GothamBold
    actualButton.Parent = buttonFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = actualButton
    
    -- Hover effects
    actualButton.MouseEnter:Connect(function()
        game:GetService("TweenService"):Create(actualButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(120, 170, 255)}):Play()
    end)
    
    actualButton.MouseLeave:Connect(function()
        game:GetService("TweenService"):Create(actualButton, TweenInfo.new(0.2), {BackgroundColor3 = self.Colors.Accent}):Play()
    end)
    
    -- Click event
    actualButton.MouseButton1Click:Connect(function()
        if callback then
            callback()
        end
    end)
    
    button.Frame = buttonFrame
    button.Button = actualButton
    
    return button
end

function ZoUiLib:CreateSlider(window, text, min, max, defaultValue, callback)
    local slider = {}
    slider.Value = defaultValue or min
    
    local sliderFrame = Instance.new("Frame")
    sliderFrame.Name = "SliderFrame_" .. text
    sliderFrame.Size = UDim2.new(1, -20, 0, 50)
    sliderFrame.Position = UDim2.new(0, 10, 0, 10 + (50 * window.ElementCount))
    sliderFrame.BackgroundTransparency = 1
    sliderFrame.LayoutOrder = window.ElementCount
    sliderFrame.Parent = window.ScrollingFrame
    
    window.ElementCount = window.ElementCount + 1
    
    -- Label
    local sliderLabel = Instance.new("TextLabel")
    sliderLabel.Name = "SliderLabel"
    sliderLabel.Size = UDim2.new(1, 0, 0, 20)
    sliderLabel.BackgroundTransparency = 1
    sliderLabel.Text = text .. ": " .. defaultValue
    sliderLabel.TextColor3 = self.Colors.Text
    sliderLabel.TextSize = 14
    sliderLabel.Font = Enum.Font.Gotham
    sliderLabel.TextXAlignment = Enum.TextXAlignment.Left
    sliderLabel.Parent = sliderFrame
    
    -- Slider track
    local sliderTrack = Instance.new("Frame")
    sliderTrack.Name = "SliderTrack"
    sliderTrack.Size = UDim2.new(1, 0, 0, 5)
    sliderTrack.Position = UDim2.new(0, 0, 0, 25)
    sliderTrack.BackgroundColor3 = self.Colors.ToggleOff
    sliderTrack.Parent = sliderFrame
    
    local trackCorner = Instance.new("UICorner")
    trackCorner.CornerRadius = UDim.new(0, 3)
    trackCorner.Parent = sliderTrack
    
    -- Slider fill
    local sliderFill = Instance.new("Frame")
    sliderFill.Name = "SliderFill"
    sliderFill.Size = UDim2.new((defaultValue - min) / (max - min), 0, 1, 0)
    sliderFill.BackgroundColor3 = self.Colors.Accent
    sliderFill.Parent = sliderTrack
    
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(0, 3)
    fillCorner.Parent = sliderFill
    
    -- Slider button
    local sliderButton = Instance.new("TextButton")
    sliderButton.Name = "SliderButton"
    sliderButton.Size = UDim2.new(0, 15, 0, 15)
    sliderButton.Position = UDim2.new((defaultValue - min) / (max - min), -7.5, 0.5, -7.5)
    sliderButton.BackgroundColor3 = self.Colors.Text
    sliderButton.Text = ""
    sliderButton.ZIndex = 2
    sliderButton.Parent = sliderTrack
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(1, 0)
    buttonCorner.Parent = sliderButton
    
    -- Dragging logic
    local dragging = false
    
    local function updateSlider(input)
        local relativeX = (input.Position.X - sliderTrack.AbsolutePosition.X) / sliderTrack.AbsoluteSize.X
        relativeX = math.clamp(relativeX, 0, 1)
        
        slider.Value = math.floor(min + (max - min) * relativeX)
        sliderLabel.Text = text .. ": " .. slider.Value
        
        sliderFill.Size = UDim2.new(relativeX, 0, 1, 0)
        sliderButton.Position = UDim2.new(relativeX, -7.5, 0.5, -7.5)
        
        if callback then
            callback(slider.Value)
        end
    end
    
    sliderButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
        end
    end)
    
    sliderButton.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    sliderTrack.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            updateSlider(input)
        end
    end)
    
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            updateSlider(input)
        end
    end)
    
    -- Exposed functions
    slider.Set = function(value)
        value = math.clamp(value, min, max)
        slider.Value = value
        
        local relativeX = (value - min) / (max - min)
        sliderLabel.Text = text .. ": " .. value
        
        sliderFill.Size = UDim2.new(relativeX, 0, 1, 0)
        sliderButton.Position = UDim2.new(relativeX, -7.5, 0.5, -7.5)
        
        if callback then
            callback(value)
        end
    end
    
    slider.Get = function()
        return slider.Value
    end
    
    return slider
end

function ZoUiLib:CreateTextBox(window, text, defaultValue, callback)
    local textbox = {}
    textbox.Value = defaultValue or ""
    
    local textboxFrame = Instance.new("Frame")
    textboxFrame.Name = "TextBoxFrame_" .. text
    textboxFrame.Size = UDim2.new(1, -20, 0, 40)
    textboxFrame.Position = UDim2.new(0, 10, 0, 10 + (40 * window.ElementCount))
    textboxFrame.BackgroundTransparency = 1
    textboxFrame.LayoutOrder = window.ElementCount
    textboxFrame.Parent = window.ScrollingFrame
    
    window.ElementCount = window.ElementCount + 1
    
    -- Label
    local textboxLabel = Instance.new("TextLabel")
    textboxLabel.Name = "TextBoxLabel"
    textboxLabel.Size = UDim2.new(0.4, 0, 0, 20)
    textboxLabel.BackgroundTransparency = 1
    textboxLabel.Text = text
    textboxLabel.TextColor3 = self.Colors.Text
    textboxLabel.TextSize = 14
    textboxLabel.Font = Enum.Font.Gotham
    textboxLabel.TextXAlignment = Enum.TextXAlignment.Left
    textboxLabel.Parent = textboxFrame
    
    -- TextBox
    local inputBox = Instance.new("TextBox")
    inputBox.Name = "TextBox"
    inputBox.Size = UDim2.new(0.6, 0, 0, 30)
    inputBox.Position = UDim2.new(0.4, 0, 0, 0)
    inputBox.BackgroundColor3 = self.Colors.TextBox
    inputBox.TextColor3 = self.Colors.Text
    inputBox.Text = defaultValue or ""
    inputBox.TextSize = 14
    inputBox.Font = Enum.Font.Gotham
    inputBox.PlaceholderText = "Enter text..."
    inputBox.Parent = textboxFrame
    
    local textboxCorner = Instance.new("UICorner")
    textboxCorner.CornerRadius = UDim.new(0, 4)
    textboxCorner.Parent = inputBox
    
    -- Update on focus lost
    inputBox.FocusLost:Connect(function()
        textbox.Value = inputBox.Text
        if callback then
            callback(inputBox.Text)
        end
    end)
    
    -- Exposed functions
    textbox.Set = function(value)
        textbox.Value = value
        inputBox.Text = value
        if callback then
            callback(value)
        end
    end
    
    textbox.Get = function()
        return textbox.Value
    end
    
    return textbox
end

function ZoUiLib:CreateLabel(window, text)
    local label = {}
    
    local labelFrame = Instance.new("Frame")
    labelFrame.Name = "LabelFrame_" .. text
    labelFrame.Size = UDim2.new(1, -20, 0, 25)
    labelFrame.Position = UDim2.new(0, 10, 0, 10 + (25 * window.ElementCount))
    labelFrame.BackgroundTransparency = 1
    labelFrame.LayoutOrder = window.ElementCount
    labelFrame.Parent = window.ScrollingFrame
    
    window.ElementCount = window.ElementCount + 1
    
    -- Actual label
    local actualLabel = Instance.new("TextLabel")
    actualLabel.Name = "Label"
    actualLabel.Size = UDim2.new(1, 0, 1, 0)
    actualLabel.BackgroundTransparency = 1
    actualLabel.Text = text
    actualLabel.TextColor3 = self.Colors.Text
    actualLabel.TextSize = 14
    actualLabel.Font = Enum.Font.Gotham
    actualLabel.TextXAlignment = Enum.TextXAlignment.Left
    actualLabel.Parent = labelFrame
    
    label.Frame = labelFrame
    label.Label = actualLabel
    
    label.SetText = function(newText)
        actualLabel.Text = newText
    end
    
    return label
end

-- Status label function (like in your example)
function ZoUiLib:CreateStatus(window, defaultText)
    local statusFrame = Instance.new("Frame")
    statusFrame.Name = "StatusFrame"
    statusFrame.Size = UDim2.new(1, -20, 0, 20)
    statusFrame.Position = UDim2.new(0, 10, 1, -30)
    statusFrame.BackgroundTransparency = 1
    statusFrame.Parent = window.MainFrame
    
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Name = "StatusLabel"
    statusLabel.Size = UDim2.new(1, 0, 1, 0)
    statusLabel.BackgroundTransparency = 1
    statusLabel.Text = defaultText or "Status: Ready"
    statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    statusLabel.TextSize = 12
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.TextXAlignment = Enum.TextXAlignment.Left
    statusLabel.Parent = statusFrame
    
    return {
        Set = function(text)
            statusLabel.Text = text
        end,
        Get = function()
            return statusLabel.Text
        end
    }
end

-- Destroy everything (clean exit)
function ZoUiLib:Destroy()
    self.ScreenGui:Destroy()
    self.Windows = {}
    self.Elements = {}
end

return ZoUiLib
